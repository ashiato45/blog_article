\documentclass{jsarticle}
\usepackage{ashiato45}
\usepackage{amsmath,amssymb,amsfonts}
\title{バナッハ空間での二階微分の例(フレッシェ微分)}
\author{ashiato45}
\newcommand{\R}{\realnumber}
\newcommand{\defeq}{:=}
\begin{document}
\maketitle

\section{これは何？}
ポストモダン解析学を読んでいて，バナッハ空間での微分\footnote{フレッシェ微分というらしい}が出てきて，この定義なら多変数関数に対する二階微分ができるはずなのだが手頃な計算例が載っていなかったので作ってみた．値を与えると関数を吐く関数のノルムをとったりとかしなくてはいけなくて，これの扱いに慣れていなかったのがてこずった原因だった．>

\section{記法}
何のノルムかが大事なので，線型写像については$\norm{\cdot}_{B(V,W)}$のよ
うに書く．

あと，関数リテラルというか無名関数というかみたいなものが欲しかったので，$f(x)=y$のような関数を
\[
 \left[x\mapsto y\right]
\]
のように書く．たとえば，
\[
 \left[\tatev{x\\y}\mapsto x+2y\right]\tatev{1\\2}=1+2\times2 = 5
\]
となる．

\section{まず微分}
今回は$f(x,y)=x^2-y^2$を扱うことにする．

$f\colon \R^2\to \R$なので，$Df\colon \R^2\to B(\R^2,\R)$となる．
気分的には$Df\colon \R^2 \to \R^2 \to \R$．したがって，$p_0\defeq(x_0,y_0)$での
微分$Df(x_0,y_0)$は未知数$a,b$を用いて，変数を$p\defeq(x,y)$として，
\[
 \lim_{p \rightarrow p_0}
\frac{\norm{f(p)-f(p_0)-\left[\tatev{\xi\\\eta}\mapsto a\xi
+b\eta\right](p-p_0)}}{\norm{p-p_0}} = 0
\]
と書いたときの$\left[\tatev{\xi\\\eta}\mapsto a\xi+b\eta\right]$の部分である．

計算すると，
\begin{align*}
  &\lim_{p \rightarrow p_0}
\frac{\norm{f(p)-f(p_0)-\left[\tatev{\xi\\\eta}\mapsto
 a\xi +b\eta\right](p-p_0)}}{\norm{p-p_0}} \\
&=  \lim_{p \rightarrow p_0}
\frac{\left|(x^2-y^2)-(x_0^2-y_0^2)-\left(a(x-x_0)+b(y-y_0)\right)\right|}{\sqrt{(x-x_0)^2+(y-y_0)^2}} \\
 &= \lim_{p \rightarrow p_0}
\frac{\left|(x-x_0)^2-(y-y_0)^2+(2x_0-a)(x-x_0)-(2y_0+b)(y-y_0)\right|}{\sqrt{(x-x_0)^2+(y-y_0)^2}} \\
 &\le \lim_{p \rightarrow p_0}
 \frac{\left|(x-x_0)^2\right| +\left|(y-y_0)^2\right| +\left|(2x_0-a)(x-x_0)\right| +\left|(2y_0 +b)(y-y_0)\right|}{\sqrt{(x-x_0)^2 +(y-y_0)^2}} \\
  &= \left|2x_0-a\right| +\left|2y_0 +b\right|
\end{align*}
よって，$a=2x_0,\, b=-2y_0$とすれば左辺は$0$になることが分かる．$p_0$での微分は一つしかないから，
\[
 Df(p_0) = \left[\tatev{\xi\\ \eta}\mapsto 2x_0\xi -2y_0\eta\right]
\]
であり，別の書き方をすると，
\[
 Df = \left[\tatev{x_0\\y_0}\mapsto \left[\tatev{\xi\\ \eta}\mapsto 2x_0\xi -2y_0\eta\right]\right]
\]

\section{二階微分}
$Df\colon \R^2\to B(\R^2,\R)$なので，$D^2 f\colon \R^2\to B(\R^2,B(\R^2,\R))$となる．気分的には
$D^2 f\colon \R^2\to \R^2 \to \R^2 \to \R$．したがって，$p_0$での二階微分$D^2 f(x_0,y_0)$は未知数$a,b,c,d$を用いて，
\[
 \lim_{p\rightarrow p_0}
\frac{\norm{Df(p)-Df(p_0)-
\left[\tatev{\xi\\ \eta}\mapsto \xi\left[\tatev{\xi' \\ \eta'}\mapsto a\xi' + b\eta' \right] + \eta\left[\tatev{\xi' \\ \eta'}\mapsto c\xi' + d\eta'\right]  \right](p-p_0)
}_{B(\R^2,\R)}}{\norm{p-p_0}}
\]
と書いたときのブラケット書きの関数の部分．以下，$B(\R^2,\R)$を$B$と略記する．計算すると，
\small
\begin{align*}
 & \lim_{p\rightarrow p_0}
\frac{\norm{Df(p)-Df(p_0)-
\left[\tatev{\xi\\ \eta}\mapsto \xi\left[\tatev{\xi' \\ \eta'}\mapsto a\xi' + b\eta' \right] + \eta\left[\tatev{\xi' \\ \eta'}\mapsto c\xi' + d\eta'\right]  \right](p-p_0)
}_B}{\norm{p-p_0}} \\
&= \lim_{p\rightarrow p_0}
\frac{\norm{\left[\tatev{\xi \\ \eta}\mapsto 2x\xi-2y\eta\right]-\left[\tatev{\xi \\ \eta}\mapsto 2x_0\xi-2y_0\eta\right]-
(x-x_0)\left[\tatev{\xi' \\ \eta'}\mapsto a\xi' + b\eta' \right] + (y-y_0)\left[\tatev{\xi' \\ \eta'}\mapsto c\xi' + d\eta'\right]
}_B}{\sqrt{(x-x_0)^2+(y-y_0)^2}} \\
&= \lim_{p\rightarrow p_0}
\frac{\norm{\left[\tatev{\xi\\\eta}\mapsto (x-x_0)(2\xi-a\xi-b\eta)-(y-y_0)(2\eta+d\eta+c\xi)\right]}_B}{\sqrt{(x-x_0)^2+(y-y_0)^2}} \\
 & = \norm{\left[\tatev{\xi\\\eta}\mapsto \xi(2-a)\right]}_B + \norm{\left[\tatev{\xi\\\eta}\mapsto b\eta\right]}_B
+ \norm{\left[\tatev{\xi\\\eta}\mapsto c\xi\right]}_B + \norm{\left[\tatev{\xi\\\eta}\mapsto (2+d)\eta\right]}_B \\
 & = \left|2-a\right| + \left|b\right| + \left|c\right| + \left|2+d\right|
\end{align*}
\normalsize
よって，$a=2,\,b=0,\,c=0,\,d=-2$とすれば，左辺は$0$となる．$p_0$での二階微分は一つしかないから，
\[
 D^2 f(p_0) = \left[\tatev{\xi\\ \eta}\mapsto \xi\left[\tatev{\xi' \\ \eta'}\mapsto 2\xi' \right] + \eta\left[\tatev{\xi' \\ \eta'}\mapsto -2\eta'\right]  \right]
\]
であり，別の書き方をすると，
\[
  D^2 f = \left[\tatev{x_0\\ y_0}\mapsto\left[\tatev{\xi\\ \eta}\mapsto \xi\left[\tatev{\xi' \\ \eta'}\mapsto 2\xi' \right] + \eta\left[\tatev{\xi' \\ \eta'}\mapsto -2\eta'\right]  \right]\right]
\]

\end{document}